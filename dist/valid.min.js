
/*!
 * valid - Javascript library to validate input fields in a form
 * v0.3.4
 * https://github.com/firstandthird/valid
 * copyright First + Third 2015
 * MIT License
*/
!function(){var a=this,b=function(a){var b,c,d,e,f,g=0;b=c=d=e=f=!1;var h,i,j="";for(h=0,i=a.length;i>h;h++)!b&&/[a-z]/.test(a)?(g+=26,b=!0):!c&&/[A-Z]/.test(a)?(g+=26,c=!0):!d&&/\d/.test(a)?(g+=10,d=!0):!e&&"!@#$%^&*()".indexOf(a)>-1?(g+=10,e=!0):!f&&"~`-_=+[]{}\\|;:'\",.<>?/".indexOf(a)>-1?(g+=22,f=!0):-1===j.indexOf(a)&&(g++,j+=a);return g},c=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},d=function(a){var b;if("object"==typeof a)for(b in a)d[b]||(d[b]=a[b]);return this};d.validate=function(a,b,c){var d={valid:!1,type:c||"validate"};return b instanceof RegExp?d.valid=b.test(a):"string"==typeof b?d.valid=b===a:"function"==typeof b&&(d.valid=b(a)),d},d.required=function(a){return d.validate(a,function(a){var b=typeof a;if("undefined"===b||null===a)return!1;if(a instanceof Array)return a.length>0;if("string"===b)return c(a).length>0;if("object"===b){for(var d in a)if(a.hasOwnProperty(d))return!0;return!1}return!0},"required")},d.slug=function(a){return d.validate(a,/^[a-z0-9-]+$/,"slug")},d.email=function(a){return d.validate(a.toLowerCase(),/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,"email")},d.password=function(a,b){return b=b||function(a){return a.length>5},d.validate(a,b,"password")},d.passwordConfirm=function(a,b){return d.validate(a,b,"password-confirm")},d.passwordStrength=function(a,c){if(!a.length)return 0;c=c||80;var d=a.length*Math.log(b(a))/Math.log(2),e=Math.round(100*d)/100;return e>c&&(e=c),~~(e/c*100)},d.maxLength=function(a,b){return b=b||0,d.validate(a,function(a){var c=typeof a;return"undefined"===c||null===a?!1:a instanceof Array||"string"===c?a.length<=b:!1},"maxLength")},d.url=function(a){return d.validate(a,function(a){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/gi.test(a)},"url")},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.validations=d):a.validations=d}(),function(a){a.declare("valid",{defaults:{errorClass:"valid-input-error",validClass:"valid-input-valid",inputTypes:["input","textarea","select"],validateOnBlur:!0,preventDefault:!0},events:{submit:"check"},init:function(){var a,b={};if(this.results=[],this.supportedInputEvent=("oninput"in document.createElement("input")?"input":"keyup")+".valid","object"==typeof this.customValidators){for(a in this.customValidators)"inputTypes"!==a?b[a]||this[a]||(b[a]=this.customValidators[a],this[a]=this.customValidators[a]):this.inputTypes=this.customValidators[a];new validations(b)}this.validateOnBlur&&this.bindEvents()},bindEvents:function(){var a=this.find(this.inputTypes.join());a.unbind(this.supportedInputEvent+" blur.valid"),a.bind(this.supportedInputEvent+" blur.valid",this.proxy(this.check))},check:function(b){this.preventDefault&&b&&b.preventDefault();var c=this;if(this.results=[],this.find(this.inputTypes.join()).each(function(){var d=a(this),e=b&&d.is(b.target),f=b&&"submit"===b.type;a.each(this.attributes,function(b,g){var h="";if(0===g.name.indexOf("data-valid-")||"data-valid-required"===g.name){h=a.camelCase(g.name.replace("data-valid-",""));var i;c[h]&&(i=c[h].call(c,d),console.log("Response",i),i.element=d[0],i.valid?f?(c.emit("inputValid",[i.element]),d.addClass(c.validClass).removeClass(c.errorClass)):e&&c.emit("inputPassing",[i.element,i]):(c.results.push(i),f?(c.emit("inputInvalid",[i.element,i]),d.addClass(c.errorClass).removeClass(c.validClass)):e&&c.emit("inputFailing",[i.element,i])))}})}),this.results.length){if(this.emit("formInvalid",[this.el,this.results]),!b)return this.results}else if(this.emit("formValid",[this.el]),!b)return!0},validate:function(b,c){var d,e="";"object"==typeof b?(e=b.val(),d=b.data("valid-validate"),d&&d.length>0&&(pattern=d)):e=b;var f=a.makeArray(arguments);return f[0]=e,f.splice(1,1),"undefined"==typeof validations[c]?!1:validations[c].apply(this,f)},custom:function(a,b){return this.validate(a,"validate",b)},required:function(a){return this.validate(a,"required")},email:function(a){return this.validate(a,"email")},password:function(a,b){return this.validate(a,"password",b)},url:function(a){return this.validate(a,"url")},passwordConfirm:function(b,c){var d;return"object"==typeof b&&(d=b.data("valid-password-confirm"),d&&d.length>0&&(c=a("#"+d))),"object"==typeof c&&(c=c.val()),this.validate(b,"passwordConfirm",c)},maxLength:function(a){return this.validate(a,"maxLength",a.data("valid-max-length"))}})}(jQuery);